(()=>{"use strict";var i;(i=jQuery)(document).ready((function(){const t=i("#plugin-action-spinner"),n=i(".enpii-plugins-installer__table tbody");function s(n,s,a,e){t.css({display:"flex",opacity:"1"}),n.text(`${s}ing...`).prop("disabled",!0),i.post(ajaxurl,a).done((i=>{i.success&&e&&n.replaceWith(`<span class="enpii-plugins-installer__status-text enpii-plugins-installer__status-text--active">${e}</span>`),setTimeout((()=>location.reload()),100)})).fail((()=>{n.text(`${s} Failed`).css("background-color","red").prop("disabled",!1)})).always((()=>(t.css("opacity","0"),void setTimeout((()=>t.css("display","none")),500))))}i(".enpii-plugins-installer__tabs a").on("click",(function(t){t.preventDefault();const s=i(this).parent().attr("class");i(".enpii-plugins-installer__tabs a").removeClass("current"),i(this).addClass("current"),n.find("tr").each((function(){const t=i(this),n=t.find(".enpii-plugins-installer__status").attr("class").split("--")[1];"all"===s||n===s?t.show():t.hide()}))})),i(document).on("click",".enpii-plugins-installer__button--install",(function(){s(i(this),"Install",{action:"enpii_install_plugin",plugin_slug:i(this).data("slug")})})),i(document).on("click",".enpii-plugins-installer__button--activate",(function(){s(i(this),"Activate",{action:"enpii_activate_plugin",plugin_path:i(this).data("path"),plugin_file:i(this).data("file")},"Activated")})),i(document).on("click",".enpii-plugins-installer__button--deactivate",(function(){s(i(this),"Deactivate",{action:"enpii_deactivate_plugin",plugin_path:i(this).data("path"),plugin_file:i(this).data("file")},"Deactivated")})),i(document).on("click",".enpii-rest-api-notice .notice-dismiss",(function(){i.ajax({type:"POST",url:ajaxurl,data:{nonce:enpiiDismissNotice.nonce,action:"enpii_rest_api_dismiss_notice"},dataType:"json"})})),function(){const t={all:0,active:0,inactive:0,mustuse:0,"not-installed":0};n.find("tr").each((function(){const n=i(this).find(".enpii-plugins-installer__status").attr("class").split("--")[1];t.hasOwnProperty(n)&&t[n]++,t.all++})),i(".enpii-plugins-installer__tabs .all .count").text(`(${t.all})`),i(".enpii-plugins-installer__tabs .active .count").text(`(${t.active})`),i(".enpii-plugins-installer__tabs .inactive .count").text(`(${t.inactive})`),i(".enpii-plugins-installer__tabs .mustuse .count").text(`(${t.mustuse})`)}()}))})();